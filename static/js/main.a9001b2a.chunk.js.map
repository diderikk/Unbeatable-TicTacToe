{"version":3,"sources":["minimax.js","index.js"],"names":["findWinner","board","i","emptySpaces","count","length","minimax","depth","isMaximizer","dataObj","player","winner","maxEval","Infinity","temp","slice","evaluation","bestMoves","push","index","randomInt","Math","floor","random","splice","minEval","minimaxPruned","alpha","beta","counter","max","min","require","MoveList","props","className","map","obj","Square","onClick","value","Buttons","buttonPlayerHandle","buttonFirstHandle","playFirst","buttonPlayAgainHandle","Board","state","Array","fill","renderSquare","bind","minmaxHandle","handleButton","this","setState","c","Object","assign","status","gamesCalculated","handlePlayButton","handlePlayAgainButton","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a9001b2a.chunk.js","sourcesContent":["export {findWinner, emptySpaces, minimax, minimaxPruned}\n\nfunction findWinner(board){\n    //Rows and columns\n    \n    for(let i = 0; i<3; i++){\n        if((board[i] === board[i+3] && board[i] === board[i+6]) && board[i]){return board[i];}\n        if((board[(i*3)] === board[(i*3)+1] && board[(i*3)] === board[(i*3)+2]) && board[i*3])return board[i*3];\n    }\n    //Diagonals\n    if((board[0] === board[4] && board[0] === board[8]) && board[0]) return board[0];\n    if((board[2] === board[4] && board[2] === board[6]) && board[2]) return board[2];\n\n    return null;\n}\n\nfunction emptySpaces(board){\n    let count = 0; \n    for(let i = 0; i<board.length; i++){\n        if(!board[i]) count++;\n    }\n    return count;\n}\n\nfunction minimax(board, depth, isMaximizer, dataObj, player){\n    let winner = findWinner(board);\n    let emptySpacesVar = emptySpaces(board);\n\n    if(emptySpacesVar === 0 || winner){\n        dataObj.count++;\n        \n        if(winner === player){\n            return -10 + depth;\n        }\n        else if(winner){\n            return 10 - depth;\n        }\n        else{\n            return 0;\n        }\n\n    }\n\n    if(isMaximizer){\n        let maxEval = -Infinity;\n        for(let i = 0; i<board.length; i++){\n            if(board[i]) continue;\n            let temp = board.slice();\n            temp[i] = (player === 'X')?'O':'X';\n            let evaluation = minimax(temp, depth+1, false, dataObj, player);\n            if(evaluation === maxEval && depth === 0){\n                dataObj.bestMoves.push({\n                    index: i,\n                    evaluation: evaluation\n                });\n            }\n            if(evaluation > maxEval){\n                maxEval = evaluation;\n                if(depth === 0){\n                    dataObj.bestMoves = [];\n                    dataObj.bestMoves.push({\n                        index: i,\n                        evaluation: evaluation\n                    });\n                }\n            }\n        }\n        if(depth === 0) {\n            let randomInt = Math.floor(Math.random() * dataObj.bestMoves.length);\n            let indexObj = dataObj.bestMoves.splice(randomInt,1);\n            return indexObj[0].index;\n        };\n        return maxEval;\n    }\n    else{\n        let minEval = Infinity;\n        for(let i = 0; i<board.length; i++){\n            if(board[i]) continue;\n            let temp = board.slice();\n            temp[i] = (player === 'X')?'X':'O';\n            let evaluation = minimax(temp, depth+1, true, dataObj, player);\n            if(evaluation < minEval){\n                minEval = evaluation;\n            }\n        }\n        return minEval;\n    }\n}\n\nfunction minimaxPruned(board, depth, alpha, beta, isMaximizer, counter, player){\n    let winner = findWinner(board);\n    let emptySpacesVar = emptySpaces(board);\n\n    if(emptySpacesVar === 0 || winner){\n        counter.count++;\n        \n        if(winner === player){\n            return -10 + depth;\n        }\n        else if(winner){\n            return 10 - depth;\n        }\n        else{\n            return 0;\n        }\n\n    }\n\n    if(isMaximizer){\n        let maxEval = -Infinity;\n        for(let i = 0; i<board.length; i++){\n            if(board[i]) continue;\n            let temp = board.slice();\n            temp[i] = (player === 'X')?'O':'X';\n            let evaluation = minimaxPruned(temp, depth+1, alpha, beta, false, counter, player);\n            if(evaluation === maxEval && depth === 0){\n                counter.bestMoves.push({\n                    index: i,\n                    evaluation: evaluation\n                });\n            }\n            if(evaluation > maxEval){\n                maxEval = evaluation;\n                if(depth === 0){\n                    counter.bestMoves = [];\n                    counter.bestMoves.push({\n                        index: i,\n                        evaluation: evaluation\n                    });\n                }\n            }\n            alpha = Math.max(alpha, evaluation);\n            if(beta <= alpha) break;\n        }\n        return maxEval;\n    }\n    else{\n        let minEval = Infinity;\n        for(let i = 0; i<board.length; i++){\n            if(board[i]) continue;\n            let temp = board.slice();\n            temp[i] = (player === 'X')?'X':'O';\n            let evaluation = minimaxPruned(temp, depth+1, alpha, beta, true, counter, player);\n            if(evaluation < minEval){\n                minEval = evaluation;\n            }\n            beta = Math.min(beta, evaluation)\n            if(beta <= alpha) break;\n        }\n        return minEval;\n    }\n}","import React from \"react\";\nimport ReactDOM from 'react-dom';\nimport './index.css';\nconst minimax = require('./minimax');\n\nconst dataObj = {\n    count: 0,\n    bestMoves: []\n};\n\nconst MoveList = (props) => {\n    return (\n        <div className=\"moveList\">\n            <p>Other moves {'({Index:Evaluation})'}: </p>\n            <ul>\n                {dataObj.bestMoves.map(obj => \n                <li key={obj.index}>\n                    {`{${obj.index}: ${obj.evaluation}}, `}\n                </li>)}\n            </ul>\n        </div>\n    )\n}\n\n\nconst Square = (props) => {\n    return (\n        <button className=\"square\" onClick={props.onClick}>\n            {props.value}\n        </button>\n    )\n}\n\nconst Buttons = (props) => {\n        return (\n            <div className=\"selectPlay\">\n                <button onClick={props.buttonPlayerHandle}>\n                    Switch to: {(props.player === 'X')?'O':'X'}\n                </button>\n                <button onClick={props.buttonFirstHandle}>\n                    {(props.playFirst)?'Play Second':'Play First'}\n                </button>\n                <button onClick={props.buttonPlayAgainHandle}>\n                    Play Again\n                </button>\n            </div>\n        )\n}\n\nclass Board extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            board: Array(9).fill(null),\n            player: 'X',\n            playFirst: false,\n            counter: {\n                count: 0,\n                bestMoves: []\n            }\n        }\n\n        this.renderSquare = this.renderSquare.bind(this);\n        this.minmaxHandle = this.minmaxHandle.bind(this);\n        this.handleButton = this.handleButton.bind(this);\n    }\n\n    handleButton(){\n        this.setState({\n            player: (this.state.player === 'X')?'O':'X',\n            board: Array(9).fill(null)\n        });\n        dataObj.count = 0; \n    }\n\n    handlePlayButton(){\n        this.setState({\n            playFirst: !this.state.playFirst,\n            board: Array(9).fill(null)\n        });\n        dataObj.count = 0;\n    }\n\n    handlePlayAgainButton(){\n        this.setState({\n            board: Array(9).fill(null)\n        });\n        dataObj.count = 0;\n    }\n\n    minmaxHandle(i){\n        dataObj.count = 0;\n        this.setState((state) => {\n            let c = Object.assign({},state.counter);\n            c.count = 0;\n            return {c};\n        })\n        let temp = this.state.board.slice();\n        if(minimax.findWinner(temp) || temp[i]){\n            return;\n        }\n        temp[i] = this.state.player;\n        let index = minimax.minimax(temp,0,true,dataObj,this.state.player);\n        minimax.minimaxPruned(temp,0,-Infinity, Infinity,true,this.state.counter,this.state.player)\n        if(minimax.emptySpaces(temp) !== 0){\n            temp[index] = (this.state.player === 'X')?'O':'X';\n        }\n        this.setState({\n            board: temp\n        });\n    }\n\n    renderSquare(i){\n        return (    \n            <Square value={this.state.board[i]} \n            onClick={() => this.minmaxHandle(i)\n            } />\n        )\n    }\n    \n    render() {  \n        let winner = minimax.findWinner(this.state.board);\n        let status = <h2>Next move: <h1>{(this.state.player === 'X')?\"X\":\"O\"}</h1></h2>;\n        if(winner) status = <h2>Winner: <h1>{winner}</h1></h2>;\n        else if(minimax.emptySpaces(this.state.board) === 0) status = <h1>Stalemate</h1>;\n\n        let gamesCalculated = <p>Games computed: {dataObj.count} &nbsp; &nbsp; Games computed (pruned): {this.state.counter.count}</p>\n\n        if(!this.state.playFirst && minimax.emptySpaces(this.state.board) === 9){\n            let temp = this.state.board.slice();\n            let index = minimax.minimax(temp,0,true,dataObj,this.state.player);\n            minimax.minimaxPruned(temp,0,-Infinity, Infinity,true,this.state.counter,this.state.player)\n            temp[index] = (this.state.player === 'X')?'O':'X';\n            this.setState({\n                board: temp\n            });\n        }\n\n        return(\n            <div className=\"container\">\n                <Buttons \n                    player={this.state.player} \n                    playFirst={this.state.playFirst}\n                    buttonPlayerHandle={() => this.handleButton()} \n                    buttonFirstHandle={() => this.handlePlayButton()}\n                    buttonPlayAgainHandle={() => this.handlePlayAgainButton()}\n                    />\n                <div className=\"board\">\n                    <div className=\"status\">{status}</div>\n                    <div className=\"row\">\n                        {this.renderSquare(0)}\n                        {this.renderSquare(1)}\n                        {this.renderSquare(2)}\n                    </div>\n                    <div className=\"row\">\n                        {this.renderSquare(3)}\n                        {this.renderSquare(4)}\n                        {this.renderSquare(5)}\n                    </div>\n                    <div className=\"row\">\n                        {this.renderSquare(6)}\n                        {this.renderSquare(7)}\n                        {this.renderSquare(8)}\n                    </div>\n                    <footer>\n                        <hr />\n                        <div className=\"footerContainer\">\n                            <div className=\"gc\">\n                                {gamesCalculated}\n                            </div>\n                            <MoveList />\n                        </div>\n                    </footer>\n                </div>\n            </div>\n        )\n    }\n}\n\nReactDOM.render(<Board />, document.getElementById('root'));\n\n\n\n\n\n\n\n\n\n\n\n\n"],"sourceRoot":""}